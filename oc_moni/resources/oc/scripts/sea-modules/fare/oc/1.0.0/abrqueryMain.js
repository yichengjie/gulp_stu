define("fare/oc/1.0.0/abrqueryMain",["./abrquery","jquery","tuiValidator","datepicker","tuiDialog","./common","./abrdelete"],function(a){var b=a("./abrquery");new b;var c=a("./abrdelete"),d=new c;d.init()}),define("fare/oc/1.0.0/abrquery",["jquery","tuiValidator","datepicker","tuiDialog","fare/oc/1.0.0/common"],function(a,b,c){function d(){this._init()}var e=a("jquery");a("tuiValidator"),a("datepicker"),a("tuiDialog");var f=a("fare/oc/1.0.0/common"),g=new f;c.exports=d,d.prototype._init=function(){var a=this;e("#effectMaxDate").datepicker({showButtonPanel:!0,clearBtn:!0,yearSuffix:"",changeMonth:!0,changeYear:!0}),e("#effectMinDate").datepicker({showButtonPanel:!0,clearBtn:!0,yearSuffix:"",changeMonth:!0,changeYear:!0}),e(document).ready(function(){e("[mode=upper]").each(function(){e(this).bind("keyup",function(){e(this).val(e(this).val().toUpperCase())})}),e("#abrQueryBtn").click(function(){a.query()}),e("#abrQueryBtn").trigger("click")})},d.prototype.query=function(){var a=e("#abrQueryBtn").attr("url"),b=this,c=this.getData();g.baseOptions.url=a,g.baseOptions.dataType="json",g.baseOptions.data=c,g.baseOptions.success=function(a){return null===a?(window.location.reload(),void 0):0===a.length?(e("#abrcontent").empty(),e.showTuiMessageDialog("没有相应搜索条件下的结果！"),void 0):(b._resultData(a),void 0)},e.ajax(g.baseOptions)},d.prototype.getData=function(){var a={};return a.serviceType=this.getServiceTypeData("serviceType"),a.carrier=e("#carrier").val(),a.subCode=e("#subCode").val(),a.effectMaxDate=e("#effectMaxDate").val(),a.effectMinDate=e("#effectMinDate").val(),a.dataSource=e("#dataSource").val(),a.internationalTag=e("#internationalTag").val(),a.departmentCode=e("#departmentCode").val(),a},d.prototype.getServiceTypeData=function(a){for(var b="",c=document.getElementsByName(a),d=0;d<c.length;d++)c[d].checked===!0&&(b+=c[d].value);return b},d.prototype._resultData=function(a){e("#abrcontent").empty();var b=e("#abrcontent");b.html("");var c=e('<div class="data_section markDiv tableLayout"></div>'),d=e('<table cellspacing="0" cellpadding="0" border="1"></table>'),f=e("<tr><th>序列号</th><th>服务类型</th><th>子代码</th><th>部门代码</th><th>行程种类</th><th>生效日期</th><th>截止日期</th><th>数据源</th><th>操作</th></tr>"),g=e("<tbody></tbody>");f.appendTo(g);for(var l=0;l<a.length;l++){var n=a[l],o=n.id,p='<tr class="border_bottom">',q='<td><input name="abrid" value="'+o+'"type="hidden"></input>'+n.sequcenceNumber+"</td>",r="<td>"+k(n.serviceType)+"</td>",s="<td>"+n.subCode+"</td>",t="<td>"+n.departmentCode+"</td>",u="<td>"+i(n.internationalTag)+"</td>",v="<td>"+n.effDate+"</td>",w="<td>"+n.discDate+"</td>",x="<td>"+j(n.dataSource)+"</td>",y='<td><div class="helper_float_left operate_btn">'+h(o)+m(n.effDate)+"</div></td>",z="</tr>";e(p+q+r+s+t+u+v+w+x+y+z).appendTo(g)}g.appendTo(d),d.appendTo(c),c.appendTo(b)};var h=function(a){var b=e("#tag_ctx").val(),c='<a href="'+b+"/abr/toAbrDatasourceUpdate?id="+a+'" title="修改编辑" class="modify helper_float_left"></a>';return c},i=function(a){return"D"==a?a="国内":"I"==a&&(a="国际"),a},j=function(a){return"OPTSVC"==a?a="ATPCO数据":"TSKOC"==a&&(a="航信数据"),a},k=function(a){return"A"==a?a="免费行李":"B"==a?a="随携行李":"C"==a?a="付费行李":"P"==a?a="预付费行李":"E"==a?a="禁运行李":"F"==a?a="运价相关":"T"==a?a="客票相关":"M"==a?a="商品相关":"R"==a&&(a="规则相关"),a},l=function(a){var b=a.split("-"),c=b[0],d=b[1],e=b[2];return new Date(c,d-1,e)},m=function(a){var b=l(a),c=new Date;return c>=b?'<div title="删除" class="deleteOK helper_float_left marginLeft5"></div>':'<div title="删除" name="abrdelete" class="delete helper_float_left marginLeft5"></div>'}}),define("fare/oc/1.0.0/common",["jquery"],function(a,b,c){function d(){}var e=a("jquery");c.exports=d,d.prototype.formSerializeObj=function(a){for(var b=e("#"+a).serializeArray(),c={},d=0;d<b.length;d++)c[b[d].name]=b[d].value;return c},d.prototype.baseOptions={type:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",timeout:1e5,async:!1,error:function(){e.showTuiErrorDialog("系统响应异常！")}},d.prototype.getDate=function(){var a=new Date,b=a.getMonth()<9?"0"+(a.getMonth()+1).toString():(a.getMonth()+1).toString(),c=a.getDate()<10?"0"+a.getDate().toString():a.getDate().toString();return a.getFullYear().toString()+"-"+b+"-"+c}}),define("fare/oc/1.0.0/abrdelete",["jquery","fare/oc/1.0.0/common"],function(a,b,c){function d(){}var e=a("jquery"),f=a("fare/oc/1.0.0/common"),g=new f;c.exports=d,d.prototype.init=function(){e(document).delegate(".delete[name=abrdelete]","click",function(){var a=e(this).parents("tr").find(":input[name=abrid]").attr("value"),b=e(this),c={},d=e("#tag_ctx").val(),f=d+"/abr/abrDatasourceDelete";c.id=a,e.showTuiConfirmDialog("确认删除?",function(){g.baseOptions.url=f,g.baseOptions.data=c,g.baseOptions.success=function(a){return null===a?(window.location.reload(),void 0):("SUCCESS"===a?e.showTuiSuccessDialog("删除成功！",function(){b.parents("tr").remove()}):e.showTuiErrorDialog("系统异常，删除失败！"),void 0)},e.ajax(g.baseOptions)})})}});
