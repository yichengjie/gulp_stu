define("fare/oc/1.0.0/edit/main",["tuiDialog","datepicker","./router","./services/index","./services/s7DataService","./services/services","./services/s7EditService","./services/globalFlagService","./directives/index","./directives/commonDirective","./directives/directives","underscore","./directives/basicInfoDirective","../tpls/edit/header.html","../tpls/edit/choose_div.html","../tpls/edit/choose-ul.html","./directives/ruleDetailDirective","../tpls/edit/geoSpecLoc.html","./directives/tableDirective","../tpls/edit/table.html","../tpls/edit/tr.html","../tpls/edit/thead.html","./controllers/index","jqueryuitimepickeraddon","./controllers/eidtController","./controllers/controllers","./util/S7FormDataUtil","./data/editJsonData","./util/S7EditUtil","./util/S7ValidateHelper","./util/commonUtil","./data/jsonDataHelper","./controllers/headController","./controllers/basicInfoController","./controllers/chargeConfirmController","./controllers/ruleDetailController","./filters/filters"],function(a,b,c){function d(){var a=$("#s7_form").validate({meta:""});window.validator=a,$("#s7_save").bind("click",function(){var b=angular.element($("#EditControllerDiv")),c=b.scope(),d=c.data.action,e=c.data.sel3.showStr;if("add"==d&&""==e)$.showTuiErrorDialog("必须选择到最后一级！");else{var f=a.form();console.info("jquery validate form return flag : "+f),f&&c.saveFormData("save")}}),$("#s7_saveAndPublish").bind("click",function(){var b=angular.element($("#EditControllerDiv")),c=b.scope(),d=c.data.action,e=c.data.sel3.showStr;if("add"==d&&""==e)$.showTuiErrorDialog("必须选择到最后一级！");else{var f=a.form();console.info("jquery validate form return  flag : "+f),f&&c.saveFormData("saveAndPublish")}})}a("tuiDialog"),a("datepicker"),a("./router"),c.exports={init:function(){angular.element(document).ready(function(){angular.bootstrap(document,["app"]),d()})}}}),define("fare/oc/1.0.0/edit/router",["fare/oc/1.0.0/edit/services/index","fare/oc/1.0.0/edit/services/s7DataService","fare/oc/1.0.0/edit/services/services","fare/oc/1.0.0/edit/services/s7EditService","fare/oc/1.0.0/edit/services/globalFlagService","fare/oc/1.0.0/edit/directives/index","fare/oc/1.0.0/edit/directives/commonDirective","fare/oc/1.0.0/edit/directives/directives","underscore","fare/oc/1.0.0/edit/directives/basicInfoDirective","fare/oc/1.0.0/edit/directives/ruleDetailDirective","fare/oc/1.0.0/edit/directives/tableDirective","fare/oc/1.0.0/edit/controllers/index","jqueryuitimepickeraddon","fare/oc/1.0.0/edit/controllers/eidtController","fare/oc/1.0.0/edit/controllers/controllers","fare/oc/1.0.0/edit/util/S7FormDataUtil","fare/oc/1.0.0/edit/data/editJsonData","fare/oc/1.0.0/edit/util/S7EditUtil","fare/oc/1.0.0/edit/util/S7ValidateHelper","fare/oc/1.0.0/edit/util/commonUtil","fare/oc/1.0.0/edit/data/jsonDataHelper","fare/oc/1.0.0/edit/controllers/headController","fare/oc/1.0.0/edit/controllers/basicInfoController","fare/oc/1.0.0/edit/controllers/chargeConfirmController","fare/oc/1.0.0/edit/controllers/ruleDetailController","fare/oc/1.0.0/edit/filters/filters"],function(a){a("fare/oc/1.0.0/edit/services/index"),a("fare/oc/1.0.0/edit/directives/index"),a("fare/oc/1.0.0/edit/controllers/index"),a("fare/oc/1.0.0/edit/filters/filters");var b=angular.module("app",["pasvaz.bindonce","app.factory","app.controllers","app.directives","app.filter"]);b.constant("NEW_ADD_STR","add"),b.constant("UPDATE_STR","update"),b.constant("DEFAULT_SERVICETYPE","F")}),define("fare/oc/1.0.0/edit/services/index",["fare/oc/1.0.0/edit/services/s7DataService","fare/oc/1.0.0/edit/services/services","fare/oc/1.0.0/edit/services/s7EditService","fare/oc/1.0.0/edit/services/globalFlagService"],function(a){a("fare/oc/1.0.0/edit/services/s7DataService"),a("fare/oc/1.0.0/edit/services/s7EditService"),a("fare/oc/1.0.0/edit/services/globalFlagService")}),define("fare/oc/1.0.0/edit/services/s7DataService",["fare/oc/1.0.0/edit/services/services"],function(a){var b=a("fare/oc/1.0.0/edit/services/services");b.factory("FormData",["DEFAULT_SERVICETYPE",function(a){var b=$.trim($("#contextPath").val()),c=$.trim($("#carrCode").val()),d=$.trim($("#action").val());return console.log("[contextPath : "+b+"],[carrCode : "+c+"],[action:"+d+"]"),{id:"",status:"",statusDes:"",contextPath:b,carrCode:c,serviceAndSubCode:"",serviceType:a,action:d,sel1:{showStr:"",value:""},sel2:{showStr:"",value:""},sel3:{showStr:"",value:"",textTableNo163:""},sel4:[],basicInfoVo:{id:"",subCode:"",indCxr:"",subDescription:"",ftmCode:"",carrCode:"",ftmDescription:"",serviceGroup:"",serviceGroupDescription:"",subGroup:"",subGroupDescription:"",serveceType:"",commercialName:""},firstMaintenanceDate:"",lastMaintenanceDate:"",description:"",fareBasis:"",freeBaggageAllowancePieces:"",firstExcessOccurrence:"1",lastExcessOccurrence:"",freeBaggageAllowanceWeight:"",freeBaggageAllowanceUnit:"",noChargeNotAvailable:"",baggageTravelApplication:"",list196VO:[],discountOrNot:"1",discountRuleTableNo201:"",list201VO:[],serviceFeeCurTableNo170:"",list170VO:[],mileageMinimum:"",mileageMaximum:"",specifiedServiceFeeApp:"",specServiceFeeColSub:"",specServiceFeeNetSell:"",specSevFeeAndOrIndicator:"",specifiedServiceFeeMileage:"",availability:"N",sequenceNumber:"",passengerTypeCode:"",minPassengerAge:"",maxPassengerAge:"",firstPassengerOccurrence:"",lastPassengerOccurrence:"",customerIndexScoreMinimum:"",customerIndexScoreMaxmum:"",frequentFlyerStatus:"",accountCodeTableNo172:"",list172VO:[],ticketDesignatorTableNo173:"",list173TicketVO:[],tktDesignatorTableNo173:"",list173TktVO:[],tourCode:"",cabin:"",upgradeToCabin:"",rbdTableNo198:"",list198VO:[],upgradeToRbdTableNo198:"",list198UpgradeVO:[],securityTableNo183:"",list183VO:[],publicPrivateIndicator:"",carrierFlightTableNo186:"",list186VO:[],taxApplication:"Y",tariff:"",rule:"",cxrResFareTableNo171:"",list171VO:[],equipment:"",equipmentTypeTableNo165:"",list165VO:[],startTime:"",stopTime:"",timeApplication:"D",dayOfWeek:"",dayOfWeekShow:{w1:!1,w2:!1,w3:!1,w4:!1,w5:!1,w6:!1,w7:!1},advancedPurchasePeriod:"",advancedPurchaseUnit:"",advancedPurchaseTktIssue:"",indicatorReissueRefund:"",formOfRefund:"",indicatorComission:"Y",indicatorInterline:"Y",firstTravelYear:"",firstTravelMonth:"",firstTravelDay:"",lastTravelYear:"",lastTravelMonth:"",lastTravelDay:"",travelStartDate:"",travelEndDate:"",list178Loc1Id:"",list178Loc1:[],list178Loc2Id:"",list178Loc2:[],list178Loc3Id:"",list178Loc3:[],geoSpecFromToWithin:"",geoSpecSectPortJourney:"P",geoSpecLoc1Type:"",geoSpecLoc1:"",geoSpecLoc2Type:"",geoSpecLoc2:"",geoSpecLoc3Type:"",geoSpecLoc3:"",geoSpecTravelIndicator:"",geoSpecExceptionStopTime:"",geoSpecExceptionStopUnit:"",geoSpecStopConnDes:""}}])}),define("fare/oc/1.0.0/edit/services/services",[],function(){var a=angular.module("app.factory",[]);return a}),define("fare/oc/1.0.0/edit/services/s7EditService",["fare/oc/1.0.0/edit/services/services"],function(a){var b=a("fare/oc/1.0.0/edit/services/services");b.factory("S7EditService",["$http","$q",function(a,b){return{getDataByUrl:function(c){var d=b.defer();return a({method:"GET",url:c}).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise},postDate:function(c,d){var e=b.defer();return a({method:"POST",url:c,data:d}).success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise}}}])}),define("fare/oc/1.0.0/edit/services/globalFlagService",["fare/oc/1.0.0/edit/services/services"],function(a){var b=a("fare/oc/1.0.0/edit/services/services");b.factory("TableStatusServcie",function(){return{tb183:{showFlag:!1},tb171:{showFlag:!1},tb172:{showFlag:!1},tb173Ticket:{showFlag:!1},tb173Tkt:{showFlag:!1},tb165:{showFlag:!1},tb186:{showFlag:!1},tb196:{showFlag:!1},tb198:{showFlag:!1},tb198UpGrade:{showFlag:!1},tb170:{showFlag:!0},tb178geo1:{showFlag:!1},tb178geo2:{showFlag:!1},tb178geo3:{showFlag:!1}}}),b.factory("FormEditStatusServcie",function(){return{firstMaintenanceDate:!0,lastMaintenanceDate:!0,description:!0,fareBasis:!0,availability:!0,freeBaggageAllowancePieces:!0,firstExcessOccurrence:!0,lastExcessOccurrence:!0,freeBaggageAllowanceWeight:!0,freeBaggageAllowanceUnit:!0,baggageTravelApplication:!0,list196VO:!0,noChargeNotAvailable:!0,list170VO:!0,list201VO:!0,specSevFeeAndOrIndicator:!0,specifiedServiceFeeMileage:!0,specifiedServiceFeeApp:!0,specServiceFeeColSub:!0,specServiceFeeNetSell:!0,indicatorComission:!0,taxApplication:!0,sequenceNumber:!0,passengerTypeCode:!0,minPassengerAge:!0,maxPassengerAge:!0,firstPassengerOccurrence:!0,lastPassengerOccurrence:!0,frequentFlyerStatus:!0,mileageMinimum:!0,mileageMaximum:!0,customerIndexScoreMinimum:!0,customerIndexScoreMaxmum:!0,list172VO:!0,list183VO:!0,publicPrivateIndicator:!0,geoSpecFromToWithin:!0,geoSpecSectPortJourney:!0,geoSpecTravelIndicator:!0,geoSpecExceptionStopTime:!0,geoSpecExceptionStopUnit:!0,geoSpecStopConnDes:!0,geoSpecLoc1Type:!0,geoSpecLoc1:!0,list178Loc1:!0,geoSpecLoc2Type:!0,geoSpecLoc2:!0,geoSpecLoc3Type:!0,geoSpecLoc3:!0,list178Loc3:!0,travelStartDate:!0,travelEndDate:!0,startTime:!0,stopTime:!0,timeApplication:!0,dayOfWeek:!0,equipment:!0,list165VO:!0,list186VO:!0,cabin:!0,list198VO:!0,upgradeToCabin:!0,list198UpgradeVO:!0,advancedPurchasePeriod:!0,advancedPurchaseUnit:!0,tourCode:!0,list173TicketVO:!0,tariff:!0,rule:!0,list173TktVO:!0,list171VO:!0,advancedPurchaseTktIssue:!0,indicatorReissueRefund:!0,formOfRefund:!0,indicatorInterline:!0}}),b.factory("FormStatusService",function(){return{firstMaintenanceDate:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["firstMaintenanceDate"],showFlag:!0,editFlag:!0},lastMaintenanceDate:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["lastMaintenanceDate"],showFlag:!0,editFlag:!0},description:{typeList:["F","M","R","T","B","E"],groupList:[],nameList:["description"],showFlag:!0,editFlag:!0},fareBasis:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["fareBasis"],showFlag:!0,editFlag:!0},availability:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["availability"],showFlag:!0,editFlag:!0},freeBaggageAllowancePieces:{typeList:["A"],groupList:[],nameList:["freeBaggageAllowancePieces"],showFlag:!0,editFlag:!0},firstAndLastExcessOccurrence:{typeList:["C","P"],groupList:[],nameList:["firstExcessOccurrence","lastExcessOccurrence"],showFlag:!0,editFlag:!0},freeBaggageAllowanceWeight:{typeList:["A","C","P"],groupList:[],nameList:["freeBaggageAllowanceWeight","freeBaggageAllowanceUnit"],showFlag:!0,editFlag:!0},baggageTravelApplication:{typeList:["A","C","P"],groupList:[],nameList:["baggageTravelApplication"],showFlag:!0,editFlag:!0},list196VO:{typeList:["A","C","P"],groupList:[],nameList:["list196VO"],showFlag:!0,editFlag:!0},noChargeNotAvailable:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["noChargeNotAvailable"],showFlag:!0,editFlag:!0},list170VOAndlist201VO:{typeList:["F","M","R","T","C","P"],groupList:[],nameList:["list170VO","list201VO"],showFlag:!0,editFlag:!0},specSevFeeAndOrIndicator:{typeList:["F","M","R","T","C","P"],groupList:[],nameList:["specSevFeeAndOrIndicator"],showFlag:!0,editFlag:!0},specifiedServiceFeeMileage:{typeList:["F","M","R","T","C","P"],groupList:[],nameList:["specifiedServiceFeeMileage"],showFlag:!0,editFlag:!0},specifiedServiceFeeApp:{typeList:["F","M","R","T","C","P"],groupList:[],nameList:["specifiedServiceFeeApp"],showFlag:!0,editFlag:!0},specServiceFeeColSub:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["specServiceFeeColSub"],showFlag:!0,editFlag:!0},specServiceFeeNetSell:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["specServiceFeeNetSell"],showFlag:!0,editFlag:!0},indicatorComission:{typeList:["F","M","R","T","C","P"],groupList:[],nameList:["indicatorComission"],showFlag:!0,editFlag:!0},taxApplication:{typeList:["F","M","R","T","C","P"],groupList:[],nameList:["taxApplication"],showFlag:!0,editFlag:!0},sequenceNumber:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["sequenceNumber"],showFlag:!0,editFlag:!0},passengerTypeCode:{typeList:["F","M","R","T","A","B","C","P"],groupList:[],nameList:["passengerTypeCode"],showFlag:!0,editFlag:!0},minAndMaxPassengerAge:{typeList:["F","M","R","T","A","B","C","P"],groupList:[],nameList:["minPassengerAge","maxPassengerAge"],showFlag:!0,editFlag:!0},firstAndLastPassengerOccurrence:{typeList:["F","M","R","T"],groupList:[],nameList:["firstPassengerOccurrence","lastPassengerOccurrence"],showFlag:!0,editFlag:!0},frequentFlyerStatus:{typeList:["F","M","R","T","A","B","C","P"],groupList:[],nameList:["frequentFlyerStatus"],showFlag:!0,editFlag:!0},mileageMinAndMaximum:{typeList:["F","T","A","B","C","E","P"],groupList:[],nameList:["mileageMinimum","mileageMaximum"],showFlag:!0,editFlag:!0},customerIndexScoreMinAndMaximum:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["customerIndexScoreMinimum","customerIndexScoreMaxmum"],showFlag:!0,editFlag:!0},list172VO:{typeList:["F","M","R","T","A","B","C","P"],groupList:[],nameList:["list172VO"],showFlag:!0,editFlag:!0},list183VO:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["list183VO"],showFlag:!0,editFlag:!0},publicPrivateIndicator:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["publicPrivateIndicator"],showFlag:!0,editFlag:!0},geoSpecFromToWithin:{typeList:["F","R","T","A","B","C","E","P"],groupList:[],nameList:["geoSpecFromToWithin"],showFlag:!0,editFlag:!0},geoSpecSectPortJourney:{typeList:["F","R","A","B","C","E","P"],groupList:[],nameList:["geoSpecSectPortJourney"],showFlag:!0,editFlag:!0},geoSpecTravelIndicator:{typeList:["F","R","A","B","C","E","P"],groupList:[],nameList:["geoSpecTravelIndicator"],showFlag:!0,editFlag:!0},geoSpecExceptionStopTimeAndUnit:{typeList:["F","R","A","C","P"],groupList:[],nameList:["geoSpecExceptionStopTime","geoSpecExceptionStopUnit"],showFlag:!0,editFlag:!0},geoSpecStopConnDes:{typeList:["F","R","A","B","C","E","P"],groupList:[],nameList:["geoSpecStopConnDes"],showFlag:!0,editFlag:!0},geoSpecLoc1AndType:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["geoSpecLoc1Type","geoSpecLoc1"],showFlag:!0,editFlag:!0},list178Loc1:{typeList:["F","M","A","C","P","T"],groupList:[],nameList:["list178Loc1"],showFlag:!0,editFlag:!0},geoSpecLoc2AndType:{typeList:["F","R","A","B","C","E","P"],groupList:[],nameList:["geoSpecLoc2Type","geoSpecLoc2"],showFlag:!0,editFlag:!0},list178Loc2:{typeList:["F","M","A","C","P","T"],groupList:[],nameList:["list178Loc2"],showFlag:!0,editFlag:!0},geoSpecLoc3AndType:{typeList:["F","R","A","B","C","E","P"],groupList:[],nameList:["geoSpecLoc3Type","geoSpecLoc3"],showFlag:!0,editFlag:!0},list178Loc3:{typeList:["F","M","A","C","P","T"],groupList:[],nameList:["list178Loc3"],showFlag:!0,editFlag:!0},travelStartDate:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["travelStartDate"],showFlag:!0,editFlag:!0},travelEndDate:{typeList:["F","M","R","T","A","B","C","E","P"],groupList:[],nameList:["travelEndDate"],showFlag:!0,editFlag:!0},startTime:{typeList:["F","T","A","B","C","E","P"],groupList:[],nameList:["startTime"],showFlag:!0,editFlag:!0},stopTime:{typeList:["F","T","A","B","C","E","P"],groupList:[],nameList:["stopTime"],showFlag:!0,editFlag:!0},timeApplication:{typeList:["hidden"],groupList:[],nameList:["timeApplication"],showFlag:!0,editFlag:!0},dayOfWeek:{typeList:["F","T","A","B","C","E","P"],groupList:[],nameList:["dayOfWeek"],showFlag:!0,editFlag:!0},equipmentAndlist165:{typeList:["F","A","B","C","E","P"],groupList:[],nameList:["equipment","list165VO"],showFlag:!0,editFlag:!0},list186VO:{typeList:["F","R","T","A","B","C","E","P"],groupList:[],nameList:["list186VO"],showFlag:!0,editFlag:!0},cabin:{typeList:["F","A","B","C","P"],groupList:[],nameList:["cabin"],showFlag:!0,editFlag:!0},list198VO:{typeList:["F","A","B","C","P"],groupList:[],nameList:["list198VO"],showFlag:!0,editFlag:!0},upgradeToCabin:{typeList:["F","M"],groupList:["UP","BDUP"],nameList:["upgradeToCabin"],showFlag:!0,editFlag:!0},list198UpgradeVO:{typeList:["F","M"],groupList:["UP","BDUP","SA","BDSA"],nameList:["list198UpgradeVO"],showFlag:!0,editFlag:!0},advancedPurchasePeriodAndUnit:{typeList:["F","M","R","T","C","P"],groupList:[],nameList:["advancedPurchasePeriod","advancedPurchaseUnit"],showFlag:!0,editFlag:!0},tourCode:{typeList:["F","M","R","T","A","B","C","P"],groupList:[],nameList:["tourCode"],showFlag:!0,editFlag:!0},list173TicketVO:{typeList:["F","M","R","T","A","B","C","P"],groupList:[],nameList:["list173TicketVO"],showFlag:!0,editFlag:!0},tariff:{typeList:["F","R","A","B","C","P"],groupList:[],nameList:["tariff"],showFlag:!0,editFlag:!0},rule:{typeList:["F","R","A","B","C","P"],groupList:[],nameList:["rule"],showFlag:!0,editFlag:!0},list173TktVO:{typeList:["F","R","A","B","C","P"],groupList:[],nameList:["list173TktVO"],showFlag:!0,editFlag:!0},list171VO:{typeList:["F","R","A","B","C","P"],groupList:[],nameList:["list171VO"],showFlag:!0,editFlag:!0},advancedPurchaseTktIssue:{typeList:["F","R","T","P"],groupList:[],nameList:["advancedPurchaseTktIssue"],showFlag:!0,editFlag:!0},indicatorReissueRefund:{typeList:["F","M","A","C","P","T"],groupList:[],nameList:["indicatorReissueRefund"],showFlag:!0,editFlag:!0},formOfRefund:{typeList:["F","M","R","T","C","P"],groupList:[],nameList:["formOfRefund"],showFlag:!0,editFlag:!0},indicatorInterline:{typeList:["F","M","R","T","C","P"],groupList:[],nameList:["indicatorInterline"],showFlag:!0,editFlag:!0}}})}),define("fare/oc/1.0.0/edit/directives/index",["fare/oc/1.0.0/edit/directives/commonDirective","fare/oc/1.0.0/edit/directives/directives","underscore","fare/oc/1.0.0/edit/directives/basicInfoDirective","fare/oc/1.0.0/edit/directives/ruleDetailDirective","fare/oc/1.0.0/edit/directives/tableDirective"],function(a){a("fare/oc/1.0.0/edit/directives/commonDirective"),a("fare/oc/1.0.0/edit/directives/basicInfoDirective"),a("fare/oc/1.0.0/edit/directives/ruleDetailDirective"),a("fare/oc/1.0.0/edit/directives/tableDirective")}),define("fare/oc/1.0.0/edit/directives/commonDirective",["fare/oc/1.0.0/edit/directives/directives","underscore"],function(require,exports,module){var directives=require("fare/oc/1.0.0/edit/directives/directives"),_=require("underscore");directives.directive("showHideTable",["TableStatusServcie",function(a){return{restrict:"E",replace:!0,scope:{},controller:["$scope","$element","$attrs",function(b){b.tableStatus=a}],template:function(a,b){var c=b.tname,d="tableStatus."+c+".showFlag",e='<a  href = "javascript:void(0)"><span ng-if="'+d+'" >收起表格</span><span ng-if="!'+d+'">填写表格</span></a>';return e},transclude:!0,link:function(b,c,d){c.bind("click",function(){var c=d.tname;b.$apply(function(){a[c].showFlag=!a[c].showFlag})})}}}]),directives.directive("setFocus",function(){return{restrict:"AE",replace:!0,scope:!0,link:function(a,b){b.trigger("click")}}}),directives.directive("geoMaxLength",function(){return{restrict:"AE",replace:!0,scope:!0,controller:["$scope","$element","$attrs",function($scope,$element,$attrs){$scope.getGeoLengthByType=function(type){type=type||"";var obj={A:"1",C:"3",N:"2",P:"3",S:"2",Z:"3"},len=eval("obj['"+type+"']")||0;return len}}],link:function(a,b,c){function d(){var d=c.geoMaxLength,e=a.$eval(d),f=a.getGeoLengthByType(e);b.attr("maxLength",f)}a.$watch(c.geoMaxLength,d)}}}),directives.directive("tuiMaxLength",function(){return{restrict:"AE",replace:!0,scope:!0,controller:["$scope","$element","$attrs",function($scope,$element,$attrs){$scope.strToJson=function(str){var json=eval("("+str+")");return json},$scope.splitMaxLengtAttr=function(a){var b={},c=a.indexOf("{"),d=a.indexOf("}"),e=a.substr(c,d+1),f=a.indexOf("["),g=a.indexOf("]"),h=a.substring(f+1,g);return b.str1=$scope.strToJson(e),b.str2=h,b}}],link:function(scope,element,attrs){function myWatchCallbackFunc(){var tuiMaxLength=attrs.tuiMaxLength,info=scope.splitMaxLengtAttr(tuiMaxLength),value2=scope.$eval(info.str2),valueAttrStr="info.str1['"+value2+"'] ",valueAtrr=eval(valueAttrStr);element.attr("maxLength",valueAtrr)}scope.$watch(attrs.tuiMaxLength,myWatchCallbackFunc)}}}),directives.directive("upperInput",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(){var a=d.$viewValue||"";a=a.toUpperCase(),d.$setViewValue(a),b.val(a)}d&&(d.$render=function(){var a=d.$viewValue||"";a=a.toUpperCase(),b.val(a),d.$setViewValue(a)},b.bind("blur",function(){a.$apply(e)}))}}}),directives.directive("linkTable",function(){return{restrict:"AE",replace:!0,scope:{list:"=",geo:"=",status:"="},controller:["$scope",function(a){function b(){angular.forEach(a.list,function(a){a.selected=!1})}a.myClick=function(){if(a.geo.showFlag=!a.geo.showFlag,!a.geo.showFlag){var c=a.list.length;"3"!=a.status&&(b(),a.list.splice(0,c))}}}],template:'<a href="javascript:void(0)"><span ng-show="!geo.showFlag">自定义区域</span><span ng-show="geo.showFlag">取消自定义</span></a>',link:function(a,b){b.bind("click",function(){a.$apply(function(){a.myClick()})})}}}),directives.directive("datepicker",function(){return{restrict:"A",scope:{},require:"ngModel",link:function(a,b,c,d){if(d){var e=c.datepicker,f=new Date(e),g={};g.dateFormat="yy-mm-dd";var h=function(b){a.$apply(function(){d.$setViewValue(b)})};g.onSelect=function(c){h(c),validator.element(b),a.select&&a.$apply(function(){a.select({date:c})})},g.minDate=f,g.showButtonPanel=!0,d.$render=function(){b.datepicker("setDate",d.$viewValue||"")},$(b).datepicker(g)}}}}),directives.directive("timepicker",function(){return{restrict:"A",scope:{},link:function(a,b){var c={controlType:"select",timeFormat:"HHmm",timeOnly:!0,timeOnlyTitle:"选择时间",timeText:"时间",hourText:"小时",minuteText:"分钟",currentText:"当前",closeText:"关闭"};$(b).datetimepicker(c)}}});var resetDataByFlag=function(a,b,c,d){if(!b)for(var e=0;e<a.length;e++){var f=a[e],g=angular.copy(d[f]);c[f]=g}},getFlagByServiceTypeAndServiceGroup=function(a,b,c,d){var e=_.contains(a,c);return e&&b&&b.length>0&&(e=_.contains(b,d)),e};directives.directive("force",["FormStatusService","FormData",function(a,b){return{restrict:"A",scope:{orgData:"="},link:function(c){c.$on("serviceTypeChangeNotice",function(d,e){for(var f in a){var g=a[f].typeList,h=a[f].groupList,i=b.serviceType,j=b.sel1.value,k=a[f].showFlag,l=getFlagByServiceTypeAndServiceGroup(g,h,i,j);if(k==!l){var m=a[f].nameList;resetDataByFlag(m,l,b,c.orgData),a[f].showFlag=l,e&&"true"==e&&c.$digest()}}}),c.$on("singleChangeByFlagNotice",function(d,e,f,g){var h=e,i="true"==f?!0:!1,j=a[h].showFlag;if(console.info("fname : ["+h+"] , newFlag : ["+i+"] , oldFlag : ["+j+"] "),i==!j){var k=a[h].nameList;resetDataByFlag(k,i,b,c.orgData),a[h].showFlag=i,g&&"true"==g&&c.$digest()}})}}}])}),define("fare/oc/1.0.0/edit/directives/directives",[],function(){var a=angular.module("app.directives",[]);return a}),define("fare/oc/1.0.0/edit/directives/basicInfoDirective",["underscore","fare/oc/1.0.0/edit/directives/directives"],function(a){var b=a("underscore"),c=a("fare/oc/1.0.0/edit/directives/directives"),d=a("fare/oc/1.0.0/tpls/edit/header.html"),e=a("fare/oc/1.0.0/tpls/edit/choose_div.html"),f=a("fare/oc/1.0.0/tpls/edit/choose-ul.html");c.directive("headerDrct",function(){return{restrict:"AE",replace:!0,scope:!0,template:d,link:function(){}}}),c.directive("chooseDiv",function(){return{restrict:"AE",replace:!0,scope:!0,transclude:!0,template:e,compile:function(a,c){var d=c.htmlUrl,e=b.template(f),g=e({value:d}),h=angular.element(a).find("div.service_list");h.append(g)}}})}),define("fare/oc/1.0.0/tpls/edit/header.html",[],'<div class="main_box helper_padding_0" ng-controller = "HeaderCtrl">\n	<div class="header_control query_section">\n		<!-- title index -->\n		<div class="helper_float_left query_section_row edit_header">\n			<h1 class="helper_margin_right_10px" ng-bind = "headerTipStr"></h1>\n			<span class="helper_color_blue_2 ">服务类型</span>\n			<span class="helper_color_blue_2 ">|</span>\n			<span class="helper_color_blue_2 ">费用</span>\n			<span class="helper_color_blue_2 ">|</span>\n			<span class="helper_color_blue_2 ">规则</span>\n		</div>\n		<!-- title index -->\n		<!-- 功能按钮start -->\n		<div class="helper_float_right operation_btnlist">\n			<div class="helper_float_left helper_margin_0_2px margin_top_5px" >\n				<div class="btn_page btn_cancel">\n					<div class="btn_left"></div>\n					<div class="btn_content" id="back" ng-click = "backPage();">返回</div>\n					<div class="btn_right"></div>\n				</div>\n			</div>\n			<div class="helper_float_left helper_margin_0_2px margin_top_5px">\n				<div class="btn_page btn_cancel">\n					<div class="btn_left"></div>\n					<div class="btn_content" id="s7_save">保存</div>\n					<div class="btn_right"></div>\n				</div>\n			</div>\n			<div class="helper_float_left helper_margin_0_2px margin_top_5px">\n				<div class="btn_page btn_save">\n					<div class="btn_left"></div>\n					<div class="btn_content" id="s7_saveAndPublish" >保存并发布</div>\n					<div class="btn_right"></div>\n				</div>\n			</div>\n			<div class="clearfix"></div>\n		</div>\n		<!-- 功能按钮end -->\n		<div class="clearfix"></div>\n	</div>\n</div>'),define("fare/oc/1.0.0/tpls/edit/choose_div.html",[],'<div class="choose_box">\n	<div class="srch_input">\n		<div class="helper_float_left input_outer"  ng-transclude="">\n		</div>\n		<div class="clearfix"></div>\n	</div>\n	<div class="service_list">\n	</div>\n</div>'),define("fare/oc/1.0.0/tpls/edit/choose-ul.html",[],'<ul>\n<%if("choose1.html"==value){%>\n	<li bindonce ng-repeat="l in serviceGroupList | serviceGroupFilter:chooseInputData.choose1"\n	 	ng-click="subGroupQuery(l.serviceGroupDescription,l.serviceGroup)" bo-bind="l.serviceGroupDescription">\n	</li>\n<%}else if("choose2.html"==value){%>\n	<li bindonce ng-repeat="l in subGroupList | subGroupFilter : chooseInputData.choose2"\n	 	ng-click="s5Query(l.subGroupDescription,l.subGroup)"  bo-bind="l.subGroupDescription">\n	</li>\n<%}else if("choose3.html"==value){%>\n	<li bindonce ng-repeat="l in lastGroupList  | lastGroupFilter : chooseInputData.choose3"\n	    ng-click="lastChooseClick(l)" class="choose4li">\n		<div class="service_name">\n			<p class="helper_float_left" bo-bind="\'[\'+l.serviceSubCode+\']\'+l.commercialName"></p>\n			<span class="helper_float_left serviceTypeSpan" bo-bind = "l.serviceType"></span>\n			<div class="clearfix"></div>\n		</div>\n	</li>\n<%}else if("choose4.html"==value){%>\n	<li bindonce ng-repeat="l in lastGroupList2" class="choose4li">\n		<div class="service_name">\n			<p class="helper_float_left" bo-bind="\'[\'+l.subCode+\']\'+l.commercialName"></p>\n			<span class = "helper_float_left serviceTypeSpan" ng-bind = "l.serviceType"></span>\n			<span bo-bind="\'x\'+l.subCodeOccurence"></span>\n			<div class="clearfix"></div>\n		</div>\n	</li>\n<%}%>\n</ul>\n'),define("fare/oc/1.0.0/edit/directives/ruleDetailDirective",["fare/oc/1.0.0/edit/directives/directives"],function(a){var b=a("fare/oc/1.0.0/edit/directives/directives"),c='<div class="helper_float_left single_edit_div">   <label class="nostyle" ng-transclude="">   </label></div>';a("fare/oc/1.0.0/tpls/edit/geoSpecLoc.html"),b.directive("geoSpecInput",function(){return{restrict:"E",replace:!0,scope:!0,template:c,transclude:!0}})}),define("fare/oc/1.0.0/tpls/edit/geoSpecLoc.html",[],'<div>\n	<!--区域头部开始-->\n	<div class="each_edit_div">\n		<label>{{title}}</label>\n		<div class="each_content_div" ng-transclude="">\n			\n		</div>\n		<div class="clearfix"></div>\n	</div>\n	<!--区域头部结束-->\n	<!--自定义区域部分开始-->\n	<div class="each_edit_div" ng-show = "showTableFlag">\n		<label>&nbsp;</label>\n		<div class = "each_content_div" >\n			<div class = "table_layout">\n				<table>\n					<thead>\n						<tr>\n							<th>类型</th>\n							<th>代码</th>\n							<th>是否适用</th>\n						</tr>\n					</thead>\n					<tbody>\n						<tr class = "hidden">\n							<!-- 这一个inpuy非常重要不能删除 -->\n							<td colspan="4"><input  id = "{{hiddenInputId}}"   type = "text" /></td>\n						</tr>\n						<tr ng-repeat = "l178 in list" ng-click = "clickTr178(l178);" ng-class = "{true:\'selectTd\',false:\'\'}[l178.selected]">\n							<td>\n								<select ng-model="l178.geoLocType"  class = "select_width" style="width:100px;"\n									ng-options="b.value as b.name for b in geoList" \n									ng-change="selectChange178Tb(l178)" >\n								</select>  \n							</td>\n							<td>\n								<div class="input_outer">\n									<input ng-model = "l178.geoLocSpec" geo-max-length = "l178.geoLocType"  \n										   ng-class = "{\'A\':\'tuiRequired tuiAreaCode\',\'C\':\'tuiRequired tuiCityCode\',\'N\':\'tuiRequired tuiCountryCode\',\'P\':\'tuiRequired tuiAirportCode\',\'S\':\'tuiRequired tuiStateCode\',\'Z\':\'tuiRequired tuiZoneCode\'}[l178.geoLocType]"\n										   type="text" tabindex="3" size="5" class="input_normal tuiUpper"/>\n								</div>\n							</td>\n							<td>\n								<div class="input_outer">\n								   <input ng-model = "l178.appl" type="radio" tabindex="3" size="5" class="input_normal"  value="" />适用\n								   <input ng-model = "l178.appl" type="radio" tabindex="3" size="5" class="input_normal"  value="N" />不适用\n								</div>\n							</td>\n						</tr>\n					</tbody>\n				</table>\n				<div class="helper_margin_top_10px">\n					<div class="btn_page btn_add_small">\n	                	<div class="btn_left"></div>\n	                    <div class="btn_content" ng-click = "tb178AddLine();">增加一行</div>\n	                    <div class="btn_right"></div>\n	                </div>\n					<div class="btn_page btn_add_small_2">\n	                	<div class="btn_left"></div>\n	                    <del-tb178></del-tb178>\n	                    <div class="btn_right"></div>\n	                </div>\n					<div class="clearfix"></div>\n				</div>\n			</div>\n			\n			\n			\n		</div>\n		<div class="clearfix"></div>\n	</div>\n	<!--自定义区域部分结束-->\n</div>\n'),define("fare/oc/1.0.0/edit/directives/tableDirective",["fare/oc/1.0.0/edit/directives/directives","underscore"],function(a){var b=a("fare/oc/1.0.0/edit/directives/directives"),c=a("fare/oc/1.0.0/tpls/edit/table.html"),d=a("fare/oc/1.0.0/tpls/edit/tr.html"),e=a("fare/oc/1.0.0/tpls/edit/thead.html"),f=a("underscore");b.directive("tableInfo",function(){return{restrict:"AE",replace:!0,template:c,scope:{tableData:"=",list:"=",tableWidth:"@",data:"="},controller:["$scope",function(a){function b(){angular.forEach(a.list,function(a){a.selected=!1})}function c(a){a&&(a.cxr="",a.rbd1="",a.rbd2="",a.rbd3="",a.rbd4="",a.rbd5="")}function d(a){a&&(a.saleGeographicPoint="")}a.column=a.tableData.titieList.length,a.status=a.data.statusDes,a.titleList=a.tableData.titieList,a.canNotModifyFlag=function(){var b=!1;return"3"==a.status&&(b=!0),b},a.tbAddLine=function(){if("3"!=a.status){b();var c=angular.copy(a.tableData.addObj);a.list.push(c)}},a.tbDelLine=function(){var c=a.list.length;if(c>=1){var d=c-1;angular.forEach(a.list,function(a,b){a.selected&&(d=b)}),a.$apply(function(){b(),a.list.splice(d,1)})}},a.clickTr=function(a){b(),a.selected=!0},a.geoSpecTypeList=[{name:"选择",value:""},{name:"A-大区",value:"A"},{name:"C-城市",value:"C"},{name:"N-国家",value:"N"},{name:"P-机场",value:"P"},{name:"S-州",value:"S"},{name:"Z-区域",value:"Z"}],a.codeTypeList=[{name:"选择",value:""},{name:"T-代理人office号",value:"T"},{name:"I-IATA号",value:"I"},{name:"Department/Identifier",value:"X"},{name:"CRS/CXR Department Code",value:"V"},{name:"ERSP No",value:"E"},{name:"LNIATA Number (CRT Address)",value:"L"},{name:"Airline specific codes",value:"A"}],a.marketingOpreratingList=[{name:"选择",value:""},{name:"M-市场方",value:"M"},{name:"O-承运方",value:"O"},{name:"E-市场方/承运方",value:"E"}],a.selectChange183Tb1=function(a){a.geographicSpecification=""},a.selectChange183Tb2=function(a){a.code=""},a.viewBookTktList=[{name:"选择",value:""},{name:"查看/订票/出票",value:1},{name:"仅查看",value:2}],a.selectChange198Tb=function(a){c(a)},a.selectChange170Tb=function(a){d(a)},a.selectChange178Tb=function(a){a.geoLocSpec=""}}],compile:function(a,b){var c=b.htmlUrl,g=f.template(e),h=f.template(d),i=g({value:c}),j=h({value:c}),k=angular.element(a);return k.find("thead").append(i),k.find("tbody").append(j),{pre:function(){},post:function(a,b){b.find("div.delete_line").bind("click",function(){"3"!=a.status&&a.tbDelLine()
})}}}}})}),define("fare/oc/1.0.0/tpls/edit/table.html",[],'<div class = "table_layout" style="width: {{tableWidth}}px;">\n<table>\n<thead>\n</thead>\n<tbody>\n</tbody>\n</table>\n<div class="helper_margin_top_10px">\n	<div class="btn_page btn_add_small">\n    	<div class="btn_left"></div>\n        <div class="btn_content" ng-click = "tbAddLine();" >增加一行</div>\n        <div class="btn_right"></div>\n    </div>\n	<div class="btn_page btn_add_small_2">\n    	<div class="btn_left"></div>\n		<div class="btn_content delete_line">删除一行</div>\n        <div class="btn_right"></div>\n    </div>\n	<div class="clearfix"></div>\n</div>\n</div>\n'),define("fare/oc/1.0.0/tpls/edit/tr.html",[],'<tr ng-repeat = "l in list"   ng-click = "clickTr(l);" ng-class = "{true:\'selectTd\',false:\'\'}[l.selected]">\n<%if("tb183.html"==value){%>\n	<td>\n		<input  name="{{\'t1831\'+$index}}" ng-model = "l.travelAgency" ng-disabled="canNotModifyFlag()"  upper-input\n			maxLength = "1" type="text" tabindex="3" size="4" />\n	</td>\n	<td>\n		<input name="{{\'t1832\'+$index}}" ng-model = "l.carrierGds" maxLength = "3" ng-disabled="canNotModifyFlag()"  \n			type="text" tabindex="3" size="4" />\n		\n	</td>\n	<td>\n		<input name="{{\'t1833\'+$index}}"  ng-model = "l.dutyFunctionCode" maxLength = "2" ng-disabled="canNotModifyFlag()"  \n				type="text" tabindex="3" size="4" />\n	</td>\n	<td>\n		<select  ng-model="l.geographicSpecificationType"  ng-disabled="canNotModifyFlag()"  style="width:100px;"\n				ng-options="c.value as c.name for c in geoSpecTypeList" ng-change="selectChange183Tb1(l)">\n		</select>\n	</td>\n	<td>\n		<input name="{{\'t1835\'+$index}}" ng-model = "l.geographicSpecification" ng-disabled="canNotModifyFlag()"  upper-input=""\n				geo-max-length = "l.geographicSpecificationType"  type="text" tabindex="3"  size="4"\n				ng-class = "{\'A\':\'required areacode\',\'C\':\'required citycode\',\'N\':\'required countrycode\',\'P\':\'required airportcode\',\'S\':\'required statecode\',\'Z\':\'required zonecode\'}[l.geographicSpecificationType]" />\n	</td>\n	<td>\n		<select ng-model="l.codeType"   style="width:100px;" ng-disabled="canNotModifyFlag()" \n				ng-options="d.value as d.name for d in codeTypeList" ng-change="selectChange183Tb2(l)">\n		</select>\n	</td>\n	<td>\n		<input name="{{\'t1836\'+$index}}" ng-model = "l.code" upper-input  ng-disabled="canNotModifyFlag()" type="text" \n			   tabindex="3" size="5"  ng-class = "{T:\'required office\',I:\'required iatanum\'}[l.codeType]"\n			   tui-max-length = "{\'T\':\'6\',\'I\':\'7\',\'X\':\'8\',\'V\':\'8\',\'E\':\'8\',\'L\':\'8\',\'A\':\'8\'}[l.codeType]" />\n	</td>\n	<td>\n		<select ng-model="l.viewBookTkt"   style="width:100px;" ng-disabled="canNotModifyFlag()" \n				ng-options="d.value as d.name for d in viewBookTktList">\n		</select>\n	</td>\n<%}else if("tb171.html"==value){%>\n	<td>\n		<input name="{{\'t1711\'+$index}}" ng-model = "l.carrier"  ng-disabled="canNotModifyFlag()"  upper-input set-focus \n			class = "air required" type = "text" tabindex="1" maxlength="3"  size = "16" />\n	</td>\n	<td>\n		<input  ng-model = "l.resFareClassCode"  ng-disabled="canNotModifyFlag()" \n			type = "text" tabindex="1" maxlength="16"  size = "16" />\n	</td>\n	<td >\n		<input  ng-model = "l.fareTypeCode"  ng-disabled="canNotModifyFlag()" \n				type = "text" tabindex="1" maxlength="3"  size = "16" />\n	</td>\n<%}else if ("tb172.html"==value){%>\n	<td>\n		<input  ng-model = "l.accountCode"  ng-disabled="canNotModifyFlag()"  type = "text" \n			tabindex="1" maxlength="20"  size = "16" />\n	</td>\n<%}else if ("tb173Ticket.html"==value){%>\n	<td>\n		<input  ng-model = "l.ticketDesignator"  ng-disabled="canNotModifyFlag()"  type = "text" \n				tabindex="1" maxlength="10"  size = "16" />\n	</td>\n<%}else if ("tb173Tkt.html"==value){%>\n	<td>\n		<input  ng-model = "l.ticketDesignator"  ng-disabled="canNotModifyFlag()" type = "text" tabindex="1"\n			 maxlength="10"  size = "16" />\n	</td>\n<%}else if ("tb165.html"==value){%>\n	<td>\n		<input name="{{\'t1651\'+$index}}" ng-model = "l.equipmentCode"  ng-disabled="canNotModifyFlag()"  upper-input="" \n			class = "lettersOrNumber" maxLength = "3" type = "text" size = "16"  />\n	</td>\n<%}else if("tb186.html"==value){%>\n	<td>\n		<input name="{{\'t1861\'+$index}}" ng-model = "l.mktCarrier" ng-disabled="canNotModifyFlag()" set-focus  \n			type="text" maxLength = "3" tabindex="3" size="5" class="required" />\n	</td>\n	<td>\n		<input ng-model = "l.optCarrier" maxLength ="3" ng-disabled="canNotModifyFlag()"  \n			type="text" tabindex="3" size="5" />\n	</td>\n	<td>\n		<input name="{{\'t1863\'+$index}}" ng-model = "l.fltNo1" maxLength = "4" ng-disabled="canNotModifyFlag()"  \n			type="text" tabindex="3" size="5" class="required"  />-\n		<input ng-model = "l.fltNo2" maxLength ="4" ng-disabled="canNotModifyFlag()"  type="text" \n			tabindex="3" size="5"  />\n</td>\n<%}else if ("tb196.html"==value){%>\n	<td>\n		<input name="{{\'t1961\'+$index}}" ng-model = "l.count"  ng-disabled="canNotModifyFlag()" \n			   maxLength = "2"  type="text" tabindex="3" size="15" class="positiveInteger"/>\n	</td>\n	<td>\n		<input name="{{\'t1962\'+$index}}" ng-model = "l.code"  upper-input set-focus  ng-disabled="canNotModifyFlag()"\n			ng-class="{true:\'chargeDO\',false:\'\'}[data.noChargeNotAvailable==\'D\'||data.noChargeNotAvailable==\'O\']"\n		 	maxLength = "3"  type="text" tabindex="3" size="15"  class="lettersOrNumber" />\n	</td>\n<%}else if ("tb198.html"==value){%>\n	<td>\n		<select ng-model="l.mktOp" ng-disabled="canNotModifyFlag()"  class = "select_width" style="width:100px;"\n			ng-change = "selectChange198Tb(l)" ng-options="b.value as b.name for b in marketingOpreratingList" >\n		</select>  \n	</td>\n	<td>\n		<input name="{{\'t1982\'+$index}}" ng-model = "l.cxr" upper-input ng-disabled="canNotModifyFlag()"  maxLength = "2"  typ \n		   ng-class = "{true:\'air required\',false:\'\'}[l.mktOp.length>0]"  tabindex="3" size="5" class="input_normal"/>\n	</td>\n	<td>\n		<input name="{{\'t1983\'+$index}}" ng-model = "l.rbd1" upper-input ng-disabled="canNotModifyFlag()"  maxLength = "1" \n		   type="text" tabindex="3" ng-class = "{true:\'seatcode required\',false:\'\'}[l.mktOp.length>0]"  size="3" />\n	</td>\n	<td>\n		<input name="{{\'t1983\'+$index}}" ng-model = "l.rbd2" upper-input ng-disabled="canNotModifyFlag()"  maxLength = "1"  \n			tabindex="3" ng-class = "{true:\'seatcode\',false:\'\'}[l.mktOp.length>0]" type="text"size="3" />\n	</td>\n	<td>\n		<input name="{{\'t1984\'+$index}}" ng-model = "l.rbd3"  upper-input ng-disabled="canNotModifyFlag()" maxLength = "1"  \n			tabindex="3" size="3" ng-class = "{true:\'seatcode\',false:\'\'}[l.mktOp.length>0]" type="text"  />\n	</td>\n	<td>\n		<input name="{{\'t1985\'+$index}}" ng-model = "l.rbd4"  upper-input ng-disabled="canNotModifyFlag()" \n			maxLength = "1"  tabindex="3" size="3" ng-class = "{true:\'seatcode\',false:\'\'}[l.mktOp.length>0]" type="text"  />\n	</td>\n	<td>\n		<input name="{{\'t1986\'+$index}}" ng-model = "l.rbd5" upper-input  ng-disabled="canNotModifyFlag()" maxLength = "1"  \n			tabindex="3" size="3" ng-class = "{true:\'seatcode\',false:\'\'}[l.mktOp.length>0]" type="text"  />\n	</td>\n<%}else if("tb198UpGrade.html"==value){%>\n	<td ng-if = "data.sel1.value==\'UP\'||data.sel1.value==\'BDUP\'">\n		<input name ="{{\'t198ug1\'+$index}}" ng-model = "l.cxr" upper-input ng-disabled="canNotModifyFlag()" \n			   class="air" maxLength="2"  type="text" tabindex="3" size="5" />\n	</td>\n	<td>\n		<input name ="{{\'t198ug2\'+$index}}" ng-model = "l.rbd1" upper-input set-focus ng-disabled="canNotModifyFlag()" \n			class="required seatcode" maxLength="1"  type="text" tabindex="3" size="7"  />\n	</td>\n	<td>\n		<input name ="{{\'t198ug3\'+$index}}" ng-model = "l.rbd2" upper-input ng-disabled="canNotModifyFlag()"  \n			class="seatcode" maxLength="1" type="text" tabindex="3" size="7" />\n	</td>\n	<td>\n		<input name ="{{\'t198ug4\'+$index}}" ng-model = "l.rbd3" upper-input  ng-disabled="canNotModifyFlag()"  \n			class="seatcode" maxLength="1" type="text" tabindex="3" size="7" />\n	</td>\n	<td>\n		<input name ="{{\'t198ug5\'+$index}}" ng-model = "l.rbd4" upper-input ng-disabled="canNotModifyFlag()"  \n			class="seatcode" maxLength="1" type="text" tabindex="3" size="7" />\n	</td>\n	<td>\n		<input name ="{{\'t198ug6\'+$index}}" ng-model = "l.rbd5" upper-input ng-disabled="canNotModifyFlag()"  \n			class="seatcode" maxLength="1" type="text" tabindex="3" size="7"  />\n	</td>\n<%}else if ("tb170.html"==value){%>\n	<td>\n		<select ng-model="l.saleGeographicPointType"  ng-disabled="canNotModifyFlag()" \n				ng-options="o.value as o.name for o in geoSpecTypeList" ng-change="selectChange170Tb(l)">\n		</select>\n	</td>\n	<td>\n		<input name = "{{\'t1701\'+$index}}"  ng-model = "l.saleGeographicPoint" ng-disabled="canNotModifyFlag()" \n			   upper-input geo-max-length = "l.saleGeographicPointType" \n			   ng-class = "{\'A\':\'required areacode\',\'C\':\'required citycode\',\'N\':\'required countrycode\',\'P\':\'required airportcode\',\'S\':\'required statecode\',\'Z\':\'required zonecode\'}[l.saleGeographicPointType]"\n			   type = "text" size = "16"  />\n	</td>\n	<td >\n		<input  name="{{\'t1702\'+$index}}" ng-model = "l.specFeeAmount" class = "required positiveInteger"  set-focus="" type = "text" \n			ng-disabled="canNotModifyFlag()" tabindex="1" maxlength="7"  size = "16" />\n	</td>\n	<td>\n		<input name = "{{\'t1703\'+$index}}" ng-model = "l.specFeeCurrency" upper-input  type = "text" \n			size = "16" maxlength="3"  ng-disabled="canNotModifyFlag()" class = "letter" \n			ng-class = "{true:\'required\',false:\'\'}[l.saleGeographicPointType.length>0]" />\n	</td>\n<%}else if("tb178.html"==value){%>\n	<td>\n		<select ng-model="l.geoLocType" ng-disabled="canNotModifyFlag()"  class = "select_width" style="width:100px;"\n			ng-options="b.value as b.name for b in geoSpecTypeList" ng-change="selectChange178Tb(l)" >\n		</select>  \n	</td>\n	<td>\n		<input name="{{\'t1782\'+$index}}" ng-model = "l.geoLocSpec" geo-max-length = "l.geoLocType" upper-input  \n			ng-disabled="canNotModifyFlag()" type="text" tabindex="3" size="5" class="input_normal"\n			ng-class = "{\'A\':\'required areacode\',\'C\':\'required citycode\',\'N\':\'required countrycode\',\'P\':\'required airportcode\',\'S\':\'required statecode\',\'Z\':\'required zonecode\'}[l.geoLocType]" />\n	</td>\n	<td>\n		   <input ng-model = "l.appl" ng-disabled="canNotModifyFlag()"  type="radio" tabindex="3" size="5" value="" />适用\n		   <input ng-model = "l.appl" ng-disabled="canNotModifyFlag()"  type="radio" tabindex="3" size="5" value="N" />不适用\n	</td>\n<%}else{%>\n	<td colspan="{{column}}">\n		<h3>你传入的html模板不存在，请检查</h3>\n	</td>\n<%}%>\n</tr>'),define("fare/oc/1.0.0/tpls/edit/thead.html",[],'<tr>\n<%if("tb183.html"==value){%>\n	<th>旅行社</th>\n	<th>航空公司/分销商</th>\n	<th>职责/功能码</th>\n	<th>区域类型</th>\n	<th>区域代码</th>\n	<th>发布对象类型</th>\n	<th>发布对象代码</th>\n	<th>权限</th>\n<%}else if("tb171.html"==value){%>\n	<th>航空公司</th>\n	<th>票价类别</th>\n	<th>运价类型</th>\n<%}else if ("tb172.html"==value){%>\n	<th>大客户编码</th>\n<%}else if ("tb173Ticket.html"==value){%>\n	<th>指定客票</th>\n<%}else if ("tb173Tkt.html"==value){%>\n	<th>指定客票</th>\n<%}else if ("tb165.html"==value){%>\n	<th>机型代码</th>\n<%}else if("tb186.html"==value){%>\n	<th>市场方</th>\n	<th>承运方</th>\n	<th>航班号</th>\n<%}else if ("tb196.html"==value){%>\n	<th>行李件数</th>\n	<th>行李子代码</th>\n<%}else if ("tb198.html"==value){%>\n	<th>市场方/承运方</th>\n	<th>航空公司</th>\n	<th>订座舱位1</th>\n	<th>订座舱位2</th>\n	<th>订座舱位3</th>\n	<th>订座舱位4</th>\n	<th>订座舱位5</th>\n<%}else if("tb198UpGrade.html"==value){%>\n	<th ng-if = "data.sel1.value==\'UP\'||data.sel1.value==\'BDUP\'">航空公司</th>\n	<th>订座舱位1</th>\n	<th>订座舱位2</th>\n	<th>订座舱位3</th>\n	<th>订座舱位4</th>\n	<th>订座舱位5</th>\n<%}else if ("tb170.html"==value){%>\n	<th>销售地类型</th>\n	<th>销售地代码</th>\n	<th>金额</th>\n	<th>货币类型</th>\n<%}else if("tb178.html"==value){%>\n	<th>类型</th>\n	<th>代码</th>\n	<th>是否适用</th>\n<%}%>\n</tr>'),define("fare/oc/1.0.0/edit/controllers/index",["jqueryuitimepickeraddon","fare/oc/1.0.0/edit/controllers/eidtController","fare/oc/1.0.0/edit/controllers/controllers","fare/oc/1.0.0/edit/util/S7FormDataUtil","fare/oc/1.0.0/edit/data/editJsonData","fare/oc/1.0.0/edit/util/S7EditUtil","fare/oc/1.0.0/edit/util/S7ValidateHelper","fare/oc/1.0.0/edit/util/commonUtil","underscore","fare/oc/1.0.0/edit/data/jsonDataHelper","fare/oc/1.0.0/edit/controllers/headController","fare/oc/1.0.0/edit/controllers/basicInfoController","fare/oc/1.0.0/edit/controllers/chargeConfirmController","fare/oc/1.0.0/edit/controllers/ruleDetailController"],function(a){a("jqueryuitimepickeraddon"),a("fare/oc/1.0.0/edit/controllers/eidtController"),a("fare/oc/1.0.0/edit/controllers/headController"),a("fare/oc/1.0.0/edit/controllers/basicInfoController"),a("fare/oc/1.0.0/edit/controllers/chargeConfirmController"),a("fare/oc/1.0.0/edit/controllers/ruleDetailController")}),define("fare/oc/1.0.0/edit/controllers/eidtController",["fare/oc/1.0.0/edit/controllers/controllers","fare/oc/1.0.0/edit/util/S7FormDataUtil","fare/oc/1.0.0/edit/data/editJsonData","fare/oc/1.0.0/edit/util/S7EditUtil","fare/oc/1.0.0/edit/util/S7ValidateHelper","fare/oc/1.0.0/edit/util/commonUtil","underscore","fare/oc/1.0.0/edit/data/jsonDataHelper"],function(a){var b=a("fare/oc/1.0.0/edit/controllers/controllers"),c=a("fare/oc/1.0.0/edit/util/S7FormDataUtil"),d=a("fare/oc/1.0.0/edit/data/editJsonData"),e=a("fare/oc/1.0.0/edit/util/S7EditUtil"),f=a("fare/oc/1.0.0/edit/data/jsonDataHelper"),g=a("fare/oc/1.0.0/edit/util/commonUtil");b.controller("EditController",["$scope","FormData","NEW_ADD_STR","UPDATE_STR","$http","S7EditService","TableStatusServcie","FormEditStatusServcie","FormStatusService",function(a,b,h,i,j,k,l,m,n){function o(b){b.then(function(b){console.info("获取初始化数据完成...."),a.serviceGroupList=b.serviceGroupList,a.passengerTypeCodeList=b.passengerList,a.frequentFlyerStatusList=b.ffpList,a.equipmentList=b.equipmentList,e.initData.initListData(a.data,a.tableStatus)},function(){console.error("初始化页面数据出错!")})}function p(b){b.then(function(b){console.info("获取初始化数据完成...."),a.serviceGroupList=b.serviceGroupList,a.passengerTypeCodeList=b.passengerList,a.frequentFlyerStatusList=b.ffpList,a.equipmentList=b.equipmentList,c.convertS7ToFormData(b.s7VO,a.data),e.initData.initListData(b.s7VO,a.tableStatus),e.initData.initOtherData(a.data),a.data.sel4=b.list163;var d=a,f=m;e.initData.init4Validate(d,a.data,f)},function(){console.error("初始化页面数据出错!")})}a.NEW_ADD_STR=h,a.UPDATE_STR=i,a.contextPath=b.contextPath,a.orgData=angular.copy(b),a.data=b,a.tableStatus=l,a.editStatus=m,a.showStatus=n;var q=$("#s7Id").val();a.data.id=q,console.info("准备初始化页面数据..........");var r="",s=null;b.action==h?(r=a.contextPath+"/initPage4Add",s=k.getDataByUrl(r),o(s)):b.action==i&&(r=a.contextPath+"/initPage4Upate?s7Id="+a.data.id,s=k.getDataByUrl(r),p(s)),console.info("页面部分数据其他处理......."),a.canNotModifyFlag=function(){var b=!1;return"3"==a.data.statusDes&&(b=!0),b};var t=new Date,u=g.getFullDayOrMonthStr(t.getMonth()+1),v=g.getFullDayOrMonthStr(t.getDate()),w=g.getFullDayOrMonthStr(t.getDate()+1);a.currentDateStr=t.getFullYear()+"-"+u+"-"+v,a.nextDateStr=t.getFullYear()+"-"+u+"-"+w,a.advancedPurchasePeriodList=d.advancedPurchasePeriodList,a.noChargeNotAvailableList={list:f.getNoChargeNotAvailableList(a.data.serviceType)},a.specifiedServiceFeeAppList={list:f.getSpecifiedServiceFeeAppList(a.data.serviceType)},a.flagData=d.flagData,a.tableData=d.tableData,a.saveFormData=function(d){var e=!1,f=c.convertFormDataToS7(a.data);e=c.validFormData(f,a.data,h),console.info("手动js校验结果为 : "+e),e&&$.showTuiConfirmDialog("保存?",function(){var c="";"save"==d?b.action==a.NEW_ADD_STR?c=a.contextPath+"/addS7":b.action==a.UPDATE_STR&&(c=a.contextPath+"/updateS7"):"saveAndPublish"==d&&(c=a.contextPath+"/saveAndPublishS7");var e=k.postDate(c,f);e.then(function(b){"true"==b.flag?$.showTuiSuccessDialog("保存成功！",function(){$.showTuiWaitingDialog("即将返回查询界面!",200,60),setTimeout(function(){$.closeTuiWindow()},5e3),window.location.href=a.contextPath+"/oc/ocView"}):$.showTuiErrorDialog("保存数据出错！")},function(){$.showTuiErrorDialog("保存数据出错！")})})}}])}),define("fare/oc/1.0.0/edit/controllers/controllers",[],function(){var a=angular.module("app.controllers",[]);return a}),define("fare/oc/1.0.0/edit/util/S7FormDataUtil",[],function(a,b,c){var d={};d.convertS7ToFormData=function(a,b){for(var c in b){var d=a.hasOwnProperty(c);if(d){var e=a[c];b[c]=e}}b.sel1.showStr=a.basicInfoVo.serviceGroupDescription,b.sel2.showStr=a.basicInfoVo.subGroupDescription,b.sel3.showStr=a.basicInfoVo.commercialName,b.sel1.value=a.basicInfoVo.serviceGroup,b.sel2.value=a.basicInfoVo.subGroup,b.sel3.value=a.basicInfoVo.subCode},d.convertFormDataToS7=function(a){var b={};return angular.extend(b,a),d.initTravelDate(b),d.initDayOfWeek(b),delete b.sel1,delete b.sel2,delete b.sel3,delete b.travelStartDate,delete b.travelEndDate,delete b.dayOfWeekShow,b},d.initTravelDate=function(a){var b=d.getDateArr(a.travelStartDate),c=d.getDateArr(a.travelEndDate);a.firstTravelYear=b[0],a.firstTravelMonth=b[1],a.firstTravelDay=b[2],a.lastTravelYear=c[0],a.lastTravelMonth=c[1],a.lastTravelDay=c[2]},d.initDayOfWeek=function(a){var b=a.dayOfWeekShow,c="",d=1;for(var e in b){var f=b[e];f&&(c+=d),d++}a.dayOfWeek=c},d.validFormData=function(a){a.serviceType,d.delInValidList(a),d.dealOtherData(a);var b=_.contains(["H","C","P"],a.specSevFeeAndOrIndicator);if((""==a.noChargeNotAvailable||"A"==a.specSevFeeAndOrIndicator)&&!b&&0==a.list201VO.length&&0==a.list170VO.length)return $.showTuiErrorDialog("当收费或则收费类型为和并且适用于不为【H,C,P】时金额必填"),!1;if(""==a.startTime){if(""!=a.stopTime)return $.showTuiErrorDialog("开始时间和结束时间必须同时为空或不为空。"),!1}else if(""==a.stopTime)return $.showTuiErrorDialog("开始时间和结束时间必须同时为空或不为空。"),!1;return""!=a.geoSpecFromToWithin&&""==a.geoSpecLoc1&&0==a.list178Loc1.length?($.showTuiErrorDialog("当区域限制不为不限区域时，区域1的代码必须有值。"),!1):"W"!=a.geoSpecFromToWithin||""===a.geoSpecLoc2&&0==a.list178Loc2.length&&""===a.geoSpecLoc3&&0==a.list178Loc3.length?!0:($.showTuiErrorDialog("当区域限制为区域1内部时，区域2和经过区域的代码必须为空。"),!1)},d.dealOtherData=function(a){var b=a.serviceType;"A"==b&&(a.firstExcessOccurrence="",a.lastExcessOccurrence=""),("C"==b||"P"==b)&&a.firstExcessOccurrence.length>0&&""==a.lastExcessOccurrence&&(a.lastExcessOccurrence=a.firstExcessOccurrence)},d.strNotNull=function(a){var b=a||"";b=$.trim(b+"");var c=!1;return b.length>0&&(c=!0),c},d.delInValidList=function(a){var b=[];angular.forEach(a.list170VO,function(a){d.strNotNull(a.specFeeAmount)&&b.push(a)});var c=[];angular.forEach(a.list198VO,function(a){d.strNotNull(a.mktOp)&&c.push(a)}),a.list198VO=c;var e=[];angular.forEach(a.list198UpgradeVO,function(a){d.strNotNull(a.rbd1)&&e.push(a)}),a.list198UpgradeVO=e;var f=[];angular.forEach(a.list183VO,function(a){var b=!1;for(var c in a){var e=a[c];if(d.strNotNull(e)){b=!0;break}}b&&f.push(a)}),a.list183VO=f;var g=[];angular.forEach(a.list186VO,function(a){d.strNotNull(a.fltNo1)&&g.push(a)}),a.list186VO=g;var h=[];angular.forEach(a.list178Loc1,function(a){d.strNotNull(a.geoLocType)&&h.push(a)}),a.list178Loc1=h;var i=[];angular.forEach(a.list178Loc2,function(a){d.strNotNull(a.geoLocType)&&i.push(a)}),a.list178Loc2=i;var j=[];angular.forEach(a.list178Loc3,function(a){d.strNotNull(a.geoLocType.length)&&j.push(a)}),a.list178Loc3=j;var k=[];angular.forEach(a.list196VO,function(a){d.strNotNull(a.count)&&d.strNotNull(a.code)&&k.push(a)}),a.list196VO=k;var l=[];angular.forEach(a.list171VO,function(a){d.strNotNull(a.carrier)&&l.push(a)}),a.list171VO=l;var m=[];angular.forEach(a.list172VO,function(a){d.strNotNull(a.accountCode)&&m.push(a)}),a.list172VO=m;var n=[];angular.forEach(a.list173TicketVO,function(a){d.strNotNull(a.ticketDesignator)&&n.push(a)}),a.list173TicketVO=n;var o=[];angular.forEach(a.list173TktVO,function(a){a.ticketDesignator.length>0&&o.push(a)}),a.list173TktVO=o;var p=[];angular.forEach(a.list165VO,function(a){a.equipmentCode.length>0&&p.push(a)}),a.list165VO=p},d.getDate=function(a){var b=a.split("-"),c=b[0],d=b[1],e=b[2];return new Date(c,d-1,e)},d.getDateArr=function(a){var b=[];if(a.length>0){var c=a.split("-");3==c.length&&(b.push(c[0]),b.push(c[1]),b.push(c[2]))}return b},c.exports=d}),define("fare/oc/1.0.0/edit/data/editJsonData",[],function(){var a={advancedPurchasePeriodList:[{name:"分",value:"Nb"},{name:"小时",value:"Hb"},{name:"天",value:"Db"},{name:"月",value:"Mb"}],flagData:{t170:{flag:!0,title:"收起表格"},t198:{flag:!1,title:"填写表格"},t198Upgrade:{flag:!1,title:"填写表格"},t183:{flag:!1,title:"填写表格"},t186:{flag:!1,title:"填写表格"},t196:{flag:!1,title:"填写表格"},t165:{flag:!1,title:"自定义区域"},t171:{flag:!1,title:"填写表格"},t172:{flag:!1,title:"填写表格"},t173Ticket:{flag:!1,title:"填写表格"},t173Tkt:{flag:!1,title:"填写表格"},geo1:{flag:!1,title:"自定义区域"},geo2:{flag:!1,title:"自定义区域"},geo3:{flag:!1,title:"自定义区域"}},tableData:{t170:{titieList:[{title:"销售地类型"},{title:"销售地代码"},{title:"金额"},{title:"货币类型"}],addObj:{saleGeographicPointType:"",saleGeographicPoint:"",specFeeAmount:"",specFeeCurrency:"CNY",selected:!0}},t198:{titieList:[{title:"市场方/承运方"},{title:"航空公司"},{title:"订座舱位1"},{title:"订座舱位2"},{title:"订座舱位3"},{title:"订座舱位4"},{title:"订座舱位5"}],addObj:{mktOp:"",cxr:"",rbd1:"",rbd2:"",rbd3:"",rbd4:"",rbd5:"",selected:!0}},t198UpGrade:{titieList:[],addObj:{cxr:"",rbd1:"",rbd2:"",rbd3:"",rbd4:"",rbd5:"",selected:!0}},t196:{titieList:[{title:"行李件数"},{title:"行李子代码"}],addObj:{count:"",code:"",selected:!0}},t186:{titieList:[{title:"市场方"},{title:"承运方"},{title:"航班号"}],addObj:{mktCarrier:"",optCarrier:"",fltNo1:"",fltNo2:"",selected:!0}},t183:{titieList:[{title:"旅行社"},{title:"航空公司/分销商"},{title:"职责/功能码"},{title:"区域类型"},{title:"区域代码"},{title:"发布对象类型"},{title:"发布对象代码"},{title:"权限"}],addObj:{travelAgency:"",carrierGds:"",dutyFunctionCode:"",geographicSpecificationType:"",geographicSpecification:"",codeType:"",code:"",viewBookTkt:"",selected:!0}},t165:{titieList:[{title:"机型代码"}],addObj:{equipmentCode:"",selected:!0}},t171:{titieList:[{title:"航空公司"},{title:"票价类别"},{title:"运价类型"}],addObj:{count:"",code:"",selected:!0}},t172:{titieList:[{title:"大客户编码"}],addObj:{accountCode:"",selected:!0}},t173Ticket:{titieList:[{title:"指定客票"}],addObj:{ticketDesignator:"",selected:!0}},t173Tkt:{titieList:[{title:"指定客票"}],addObj:{ticketDesignator:"",selected:!0}},t178Loc1:{titieList:[{title:"类型"},{title:"代码"},{title:"是否适用"}],addObj:{geoLocType:"",geoLocSpec:"",appl:"",selected:!0}},t178Loc2:{titieList:[{title:"类型"},{title:"代码"},{title:"是否适用"}],addObj:{geoLocType:"",geoLocSpec:"",appl:"",selected:!0}},t178Loc3:{titieList:[{title:"类型"},{title:"代码"},{title:"是否适用"}],addObj:{geoLocType:"",geoLocSpec:"",appl:"",selected:!0}}},weightUnitList:[{name:"选择",value:""},{name:"千克",value:"K"},{name:"磅",value:"P"}],specServiceFeeColSubList:[{name:"包含在票价中",value:"I"},{name:"单独收费",value:""}],noChargeNotAvailableList:[{name:"收费",value:""},{name:"不适用",value:"X"},{name:"免费，不出EMD单",value:"F"},{name:"免费，出EMD单",value:"E"},{name:"免费，不出EMD单，不要求预定",value:"G"},{name:"免费，出EMD单，不要求预定",value:"H"},{name:"免费，行李规则遵循市场方航空公司规则",value:"D"},{name:"免费，行李规则遵循承运方航空公司规则",value:"O"}],specServiceFeeNetSellList:[{name:"销售价",value:""},{name:"净价",value:"N"}],baggageTravelApplicationList:[{name:"必须匹配所有的航段",value:"A"},{name:"至少匹配一个航段",value:"S"},{name:"必须匹配旅行航段中的主航段",value:"M"},{name:"必须匹配整个行程的每一段",value:"J"},{name:"不限制",value:""}],noCharge_notAvailableList:[{name:"收费",value:""},{name:"不适用",value:"X"},{name:"免费，不出EMD单",value:"F"},{name:"免费，出EMD单",value:"E"},{name:"免费，不出EMD单，不要求预定",value:"G"},{name:"免费，出EMD单，不要求预定",value:"H"},{name:"免费，行李规则遵循市场方航空公司规则",value:"D"},{name:"免费，行李规则遵循承运方航空公司规则",value:"O"}],cabinList:[{name:"R-豪华头等舱",value:"R"},{name:"F-头等舱",value:"F"},{name:"J-豪华商务舱",value:"J"},{name:"C-商务舱",value:"C"},{name:"P-豪华经济舱",value:"P"},{name:"Y-经济舱",value:"Y"}],geoLocTypeList:[{name:"选择",value:""},{name:"A-大区",value:"A"},{name:"C-城市",value:"C"},{name:"N-国家",value:"N"},{name:"P-机场",value:"P"},{name:"S-州",value:"S"},{name:"Z-区域",value:"Z"}],formOfRefundList:[{name:"选择",value:""},{name:"按原付款渠道退款",value:"1"},{name:"按电子凭证退款",value:"2"}],geoSpecSectPortJourneyList:[{name:"选择",value:""},{name:"区域",value:"S"},{name:"部分",value:"P"},{name:"全程",value:"J"}],geoSpecExceptionStopUnitList:[{name:"选择",value:""},{name:"分",value:"N"},{name:"小时",value:"H"},{name:"天",value:"D"},{name:"周",value:"W"},{name:"月",value:"M"}],timeApplicationList:[{name:"选择",value:""},{name:"分别",value:"D"},{name:"之间",value:"R"}]};return a}),define("fare/oc/1.0.0/edit/util/S7EditUtil",["fare/oc/1.0.0/edit/util/S7ValidateHelper","fare/oc/1.0.0/edit/util/commonUtil","underscore","fare/oc/1.0.0/edit/data/jsonDataHelper"],function(a){var b=a("fare/oc/1.0.0/edit/util/S7ValidateHelper"),c=function(a){""!=a.firstTravelYear&&""!=a.firstTravelMonth&&""!=a.firstTravelDay&&(a.travelStartDate=a.firstTravelYear+"-"+a.firstTravelMonth+"-"+a.firstTravelDay),""!=a.firstTravelYear&&""!=a.firstTravelMonth&&""!=a.firstTravelDay&&(a.travelEndDate=a.lastTravelYear+"-"+a.lastTravelMonth+"-"+a.lastTravelDay);for(var b=a.dayOfWeek,c=b.length,d=0;c>d;d++){var e=b.charAt(d),f="w"+e;a.dayOfWeekShow[f]=!0}},d=function(a,b){b.showFlag=a.length>0?!0:!1},e=function(a,b){a.list170VO.length>0&&d(a.list170VO,b.tb170),a.list201VO.length>0&&d(a.list201VO,b.tb170),d(a.list198VO,b.tb198),d(a.list198UpgradeVO,b.tb198UpGrade),d(a.list183VO,b.tb183),d(a.list186VO,b.tb186),d(a.list178Loc1,b.tb178geo1),d(a.list178Loc2,b.tb178geo2),d(a.list178Loc3,b.tb178geo3),d(a.list196VO,b.tb196),d(a.list165VO,b.tb165),d(a.list171VO,b.tb171),d(a.list172VO,b.tb172),d(a.list173TicketVO,b.tb173Ticket),d(a.list173TktVO,b.tb173Tkt)},f=function(a,c,d){var e=c.statusDes;if("3"==e)for(var f in d)d[f]=!1;b.changeServiceType(a,c,d),b.changeNoChargeNotAvailable(a,c,d),b.changeSpecifiedServiceFeeApp(a,c)},g={initData:{initOtherData:c,initListData:e,init4Validate:f}};return g}),define("fare/oc/1.0.0/edit/util/S7ValidateHelper",["fare/oc/1.0.0/edit/util/commonUtil","underscore","fare/oc/1.0.0/edit/data/jsonDataHelper"],function(a,b,c){var d=a("fare/oc/1.0.0/edit/util/commonUtil"),e=a("underscore"),f=a("fare/oc/1.0.0/edit/data/jsonDataHelper");c.exports={changeServiceType:function(a,b,c){var d=b.serviceType;"A"==d?b.noChargeNotAvailable="F":"B"==d?b.noChargeNotAvailable="F":"C"==d||"P"==d?b.noChargeNotAvailable="":"E"==d&&(b.noChargeNotAvailable="X"),c.noChargeNotAvailable="C"==d||"P"==d?!1:!0,"A"==d||"B"==d||"E"==d?(b.availability="N",c.availability=!1):c.availability=!0,a.noChargeNotAvailableList.list=f.getNoChargeNotAvailableList(d),a.specifiedServiceFeeAppList.list=f.getSpecifiedServiceFeeAppList(d),a.$broadcast("serviceTypeChangeNotice","false")},changeNoChargeNotAvailable:function(a,b,c){var f=b.serviceType,g=b.noChargeNotAvailable,h=d.checkBaggageServcie(f),i=!0;if(h)i=""==g?!0:!1;else{var j=["X","E","F","G","H"],k=e.contains(j,g);i=k?!1:!0}"D"==g?(b.baggageTravelApplication="",c.baggageTravelApplication=!1):c.baggageTravelApplication=!0;var l=!0;"A"==f&&("D"==g||"O"==g)&&(l=!1),a.$broadcast("singleChangeByFlagNotice","freeBaggageAllowancePieces",l+"","false"),a.$broadcast("singleChangeByFlagNotice","list170VOAndlist201VO",i+"","false"),a.$broadcast("singleChangeByFlagNotice","specifiedServiceFeeMileage",i+"","false"),a.$broadcast("singleChangeByFlagNotice","specifiedServiceFeeApp",i+"","false")},changeSpecifiedServiceFeeApp:function(a,b){var c=b.specifiedServiceFeeApp,d=!0;("H"==c||"C"==c||"P"==c)&&(d=!1),a.$broadcast("singleChangeByFlagNotice","list170VOAndlist201VO",d+"","false")}}}),define("fare/oc/1.0.0/edit/util/commonUtil",["underscore"],function(a,b,c){var d=a("underscore");c.exports={checkCommonServcie:function(a){var b=["F","M","R","T"],c=d.contains(b,a);return c},checkBaggageServcie:function(a){var b=["A","B","C","E","P"],c=d.contains(b,a);return c},getFullDayOrMonthStr:function(a){return 10>a?"0"+a:a+""}}}),define("fare/oc/1.0.0/edit/data/jsonDataHelper",[],function(a,b,c){c.exports={getNoChargeNotAvailableList:function(a){var b=a||"",c=[],d=[{name:"收费",value:""},{name:"不适用",value:"X"},{name:"免费，不出EMD单",value:"F"},{name:"免费，出EMD单",value:"E"},{name:"免费，不出EMD单，不要求预定",value:"G"},{name:"免费，出EMD单，不要求预定",value:"H"}];return c="A"==b?[{name:"不适用",value:"X"},{name:"免费，不出EMD单",value:"F"},{name:"免费，出EMD单",value:"E"},{name:"免费，不出EMD单，不要求预定",value:"G"},{name:"免费，出EMD单，不要求预定",value:"H"},{name:"免费，行李规则遵循市场方航空公司规则",value:"D"},{name:"免费，行李规则遵循承运方航空公司规则",value:"O"}]:"B"==b?[{name:"免费，不出EMD单",value:"F"}]:"E"==b?[{name:"不适用",value:"X"}]:d},getSpecifiedServiceFeeAppList:function(a){var b=a||"",c=[{name:"每一个票价组成部分算一次服务费用",value:"1"},{name:"每一个票价组成部分算一半的服务费用",value:"2"},{name:"每用一次服务算一次服务费用",value:"3"},{name:"匹配的部分航程算一次服务费用",value:"4"},{name:"服务收费对应每张售票",value:"5"}];switch(b){case"F":c=[{name:"每一个票价组成部分算一次服务费用",value:"1"},{name:"每一个票价组成部分算一半的服务费用",value:"2"},{name:"每用一次服务算一次服务费用",value:"3"},{name:"匹配的部分航程算一次服务费用",value:"4"},{name:"服务收费对应每张售票",value:"5"}];break;case"M":c=[{name:"每用一次服务算一次服务费用",value:"3"}];break;case"R":c=[{name:"服务收费对应每张售票",value:"5"}];break;case"T":c=[{name:"每用一次服务算一次服务费用",value:"3"},{name:"服务收费对应每张售票",value:"5"}];break;case"A":c=[];break;case"B":c=[];break;case"C":c=[{name:"按托运点收费",value:"3"},{name:"按全行程收费",value:"4"},{name:"每公斤按公布运价的0.5%收费",value:"H"},{name:"每公斤按公布运价的1%收费",value:"C"},{name:"每公斤按公布运价的1.5%收费",value:"P"},{name:"按每公斤收费",value:"K"},{name:"按每5公斤收费",value:"F"}];break;case"E":c=[];break;case"P":c=[{name:"按托运点收费",value:"3"},{name:"按全行程收费",value:"4"},{name:"每公斤按公布运价的0.5%收费",value:"H"},{name:"每公斤按公布运价的1%收费",value:"C"},{name:"每公斤按公布运价的1.5%收费",value:"P"},{name:"按每公斤收费",value:"K"},{name:"按每5公斤收费",value:"F"}];break;default:console.info("传入的serviceType有问题")}return c}}}),define("fare/oc/1.0.0/edit/controllers/headController",["fare/oc/1.0.0/edit/controllers/controllers"],function(a){var b=a("fare/oc/1.0.0/edit/controllers/controllers");b.controller("HeaderCtrl",["$scope","FormData","NEW_ADD_STR",function(a,b,c){a.NEW_ADD_STR=c,a.contextPath=b.contextPath,a.backPage=function(){window.location.href=a.contextPath+"/oc/ocView"};var d=b.action||"";a.headerTipStr=d==a.NEW_ADD_STR?"新建服务费用":"更新服务费用"}])}),define("fare/oc/1.0.0/edit/controllers/basicInfoController",["fare/oc/1.0.0/edit/controllers/controllers","fare/oc/1.0.0/edit/data/jsonDataHelper","fare/oc/1.0.0/edit/util/commonUtil","underscore","fare/oc/1.0.0/edit/util/S7ValidateHelper"],function(a){var b=a("fare/oc/1.0.0/edit/controllers/controllers");a("fare/oc/1.0.0/edit/data/jsonDataHelper"),a("fare/oc/1.0.0/edit/util/commonUtil");var c=a("underscore"),d=a("fare/oc/1.0.0/edit/util/S7ValidateHelper");b.controller("BasicInfoCtrl",["$scope","$http","FormData","DEFAULT_SERVICETYPE","FormEditStatusServcie",function(a,b,e,f,g){a.chooseInputData={choose1:"",choose2:"",choose3:""},a.data=e,a.showChooseFunc=function(){var a="",b=e.sel1.showStr||"",c=e.sel2.showStr||"",d=e.sel3.showStr||"";return b.length>0&&(a=b),c.length>0&&(a+=" > "+c),d.length>0&&(a+=" > "+d),a},a.subGroupQuery=function(c,d){var g=a.contextPath;e.sel1.showStr=c,e.sel1.value=d,e.sel2.showStr="",e.sel2.value="",e.sel3.showStr="",e.sel3.value="",a.lastGroupList=[],a.lastGroupList2=[],e.serviceAndSubCode="",e.serviceType=f,e.noChargeNotAvailable="";var h=g+"/basicInfo/queryBasicInfoByGroup",i=a.data.carrCode,j={},k={params:{carrier:i,serviceGroup:d}};b.post(h,j,k).success(function(b){a.subGroupList=b}).error(function(){alert("查询出错!")}),a.data.basicInfoVo.serviceGroup="",a.data.basicInfoVo.subGroup="",a.data.basicInfoVo.subCode="",a.data.sel4=[]},a.s5Query=function(c,d){var g=a.contextPath;e.sel2.showStr=c,e.sel2.value=d,e.sel3.showStr="",e.sel3.value="",a.lastGroupList=[],e.serviceAndSubCode="",e.serviceType=f,a.lastGroupList2=[],e.noChargeNotAvailable="";var h=g+"/s5/queryS5BySubGroup",i=a.data.carrCode,j=e.sel1.value,k={},l={params:{carrier:i,serviceGroup:j,subGroup:d}};b.post(h,k,l).success(function(b){a.lastGroupList=b}).error(function(){alert("查询出错!")}),a.data.basicInfoVo.serviceGroup="",a.data.basicInfoVo.subGroup="",a.data.basicInfoVo.subCode="",a.data.sel4=[]},a.lastChooseClick=function(f){for(var h in a.data)c.contains(["sel1","sel2","sel3","sel4"],h)||(a.data[h]=angular.copy(a.orgData[h]));
validator.resetForm();var i=f.carrCode,j=f.serviceSubCode,k=f.commercialName,l=f.serviceType;e.carrCode=i,e.serviceAndSubCode=j,e.serviceType=l,a.data.basicInfoVo.serviceGroup=f.attributesGroup,a.data.basicInfoVo.subGroup=f.attributesSubgroup,a.data.basicInfoVo.subCode=j,e.sel3.showStr="["+j+"]"+k,e.sel3.value=j,d.changeServiceType(a.$parent,e,g);var m=f.subCodeTableNo163||"";m=1*m;var n=e.contextPath+"/s7/query4ClickService",o={subCodeTableNo163:m+"",carrCode:f.carrCode,serviceType:f.serviceType,serviceAndSubCode:f.serviceSubCode};b.post(n,o).success(function(b){a.lastGroupList2=b.tb163List,a.data.sel4=b.tb163List,a.data.sequenceNumber=1*b.maxSequenceNumber+10}).error(function(){console.info("查询出错!")}),a.data.discountOrNot="1",a.data.list201VO=[]}}])}),define("fare/oc/1.0.0/edit/controllers/chargeConfirmController",["fare/oc/1.0.0/edit/controllers/controllers","fare/oc/1.0.0/edit/data/editJsonData","fare/oc/1.0.0/edit/util/commonUtil","underscore","fare/oc/1.0.0/edit/data/jsonDataHelper","fare/oc/1.0.0/edit/util/S7ValidateHelper"],function(a){var b=a("fare/oc/1.0.0/edit/controllers/controllers"),c=a("fare/oc/1.0.0/edit/data/editJsonData");a("fare/oc/1.0.0/edit/util/commonUtil"),a("fare/oc/1.0.0/edit/data/jsonDataHelper"),a("underscore");var d=a("fare/oc/1.0.0/edit/util/S7ValidateHelper");b.controller("ChargeConfirmCtrl",["$scope","FormData","FormEditStatusServcie",function(a,b,e){a.data=b,a.weightUnitList=c.weightUnitList,a.specServiceFeeColSubList=c.specServiceFeeColSubList,a.specServiceFeeNetSellList=c.specServiceFeeNetSellList,a.baggageTravelApplicationList=c.baggageTravelApplicationList,a.changeNoChargeNotAvailable=function(){var b=a.$parent,c=a.data,f=e;d.changeNoChargeNotAvailable(b,c,f)},a.changeSpecifiedServiceFeeApp=function(){var b=a.$parent,c=a.data;d.changeSpecifiedServiceFeeApp(b,c)},a.clickDiscount2=function(a){var b=a.discountType;"1"==b?a.discountNum="":a.onePriceNum=""},a.clickDiscount=function(b){if(a.flagData.t170.flag=!0,a.flagData.t170.title="收起表格",a.data.discountOrNot=b,"1"==b)a.data.list201VO=[];else{a.data.list170VO=[];var c=a.data.sel3.value;if(c.length>0){a.data.list201VO=[];var d=a.data.sel1.value;if(null!=d&&d.length>2&&0===d.indexOf("BD")){for(var e=[],f=0;f<a.data.sel4.length;f++){var g=a.data.sel4[f],h={subCode:g.subCode,commercialName:g.commercialName,discountType:"1",onePriceNum:"",discountNum:""};e.push(h)}a.data.list201VO=e}else{a.data.list201VO=[];var i=a.data.sel3.value,j=2+i.length,k=a.data.sel3.showStr,l=k.substring(j),h={subCode:i,commercialName:l,discountType:"1",onePriceNum:"",discountNum:""};a.data.list201VO=[h]}}else a.data.list201VO=[],alert("服务必须选择到最后一级!")}}}])}),define("fare/oc/1.0.0/edit/controllers/ruleDetailController",["fare/oc/1.0.0/edit/controllers/controllers","fare/oc/1.0.0/edit/data/editJsonData"],function(a){var b=a("fare/oc/1.0.0/edit/controllers/controllers"),c=a("fare/oc/1.0.0/edit/data/editJsonData");b.controller("RuleDetailCtrl",["$scope","FormData","NEW_ADD_STR","$http",function(a,b,d){a.data=b,a.NEW_ADD_STR=d,a.noCharge_notAvailableList=c.noCharge_notAvailableList,a.cabinList=c.cabinList,a.geoLocTypeList=c.geoLocTypeList,a.indicatorReissueRefundList=c.geoLocTypeList,a.formOfRefundList=c.formOfRefundList,a.geoSpecSectPortJourneyList=c.geoSpecSectPortJourneyList,a.geoSpecExceptionStopUnitList=c.geoSpecExceptionStopUnitList,a.timeApplicationList=c.timeApplicationList,a.getUpGradeTableTile=function(){var a=b.sel1.value,c="";return"SA"==a||"BDSA"==a?c="座位属性表":("UP"==a||"BDUP"==a)&&(c="升舱属性表"),c};var e=["SA","BDSA","UP","BDUP"];a.showUpGradeTableFlag=function(){var c=!1,d=e.indexOf(b.sel1.value);return-1!=d&&(c=!0),c&&(c="M"==a.data.serviceType||"F"==a.data.serviceType?!0:!1),c};var f=["UP","BDUP"];a.showUpGradeServiceFlag=function(){var c=!1,d=f.indexOf(b.sel1.value);return-1!=d&&(c=!0),c&&(c="M"==a.data.serviceType||"F"==a.data.serviceType?!0:!1),c},a.getUpGradeInputSize=function(){var a=b.sel1.value,c=5;return"SA"==a||"BDSA"==a?c=10:("UP"==a||"BDUP"==a)&&(c=5),c},a.selectChangeEquipment=function(){a.flagData.t165.title="自定义区域",a.flagData.t165.flag=!1},a.selectChangeGeoSpecLoc1=function(){a.data.geoSpecLoc1="",a.flagData.geo1.title="自定义区域",a.flagData.geo1.flag=!1},a.selectChangeGeoSpecLoc2=function(){a.data.geoSpecLoc2="",a.flagData.geo2.title="自定义区域",a.flagData.geo2.flag=!1},a.selectChangeGeoSpecLoc3=function(){a.data.geoSpecLoc3="",a.flagData.geo3.title="自定义区域",a.flagData.geo3.flag=!1}}])}),define("fare/oc/1.0.0/edit/filters/filters",[],function(){var a=angular.module("app.filter",[]);a.filter("serviceGroupFilter",function(){var a=function(a,b){b=b||"";var c=[];return b.length>0?(b=b.toLowerCase(),angular.forEach(a,function(a){-1!=a.serviceGroupDescription.toLowerCase().indexOf(b)&&c.push(a)})):c=a,c};return a}),a.filter("subGroupFilter",function(){var a=function(a,b){b=b||"";var c=[];return b.length>0?(b=b.toLowerCase(),angular.forEach(a,function(a){-1!=a.subGroupDescription.toLowerCase().indexOf(b)&&c.push(a)})):c=a,c};return a}),a.filter("lastGroupFilter",function(){var a=function(a,b){b=b||"";var c=[];return b.length>0?(b=b.toLowerCase(),angular.forEach(a,function(a){var d="["+a.serviceSubCode+"]"+a.commercialName;-1!=d.toLowerCase().indexOf(b)&&c.push(a)})):c=a,c};return a})});
